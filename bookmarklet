javascript:(function()%7Bfunction callback()%7B(function(%24)%7Bvar jQuery%3D%24%3BgameStats %3D %5B%5D%3BgameHashesRecorded %3D %5B%5D%3Bfunction parse_game_stats()%7Bgame %3D %7B%7D%3Bscoreboard %3D document.getElementsByClassName("scoreboard-view")%5B0%5D%3Blevel_row %3D scoreboard.children%5B0%5D%3Bgame%5B'game_type'%5D %3D level_row.children%5B1%5D.children%5B0%5D.textContent%3Bgame%5B'level_name'%5D %3D level_row.children%5B0%5D.children%5B0%5D.textContent%3Bgame%5B'scores'%5D %3D %5B%5D%3Bwinning_score %3D 0%3Bhas_nonzero_score %3D false%3Bteam_game %3D (game.game_type %3D%3D "Team Deathmatch")%3Bteams %3D %5B%5B%5D%2C%5B%5D%5D%3Bscoreboard.children%5B1%5D.childNodes.forEach(function(stat_row%2C i)%7Bstat_row.childNodes.forEach(function(stats%2C j)%7Bif(j >%3D 1)%7Bname %3D stats.children%5B0%5D.children%5B1%5D.textContent%3Bscore %3D stats.children%5B1%5D.textContent%3Bkills %3D stats.children%5B2%5D.textContent%3Bdeaths %3D stats.children%5B3%5D.textContent%3Bif(score !%3D 0)%7Bhas_nonzero_score %3D true%3B%7Dif(score !%3D "")%7Bgame%5B'scores'%5D.push(%7Bname%2C score%2C kills%2C deaths%7D)%3Bteams%5Bi%5D.push(name)%3Bif(j %3D%3D 1)%7Bgame%5B'winner'%5D %3D name%3Bwinning_score %3D score%3B%7Dif(j > 1 %26%26 score %3D%3D winning_score)%7Bgame%5B'winner'%5D %3D game%5B'winner'%5D %2B " - TIE - " %2B name%3B%7D%7D%7D%7D)%3B%7D)%3Bif (team_game) %7Bteam_one_score %3D document.querySelector('%5Bdata-hook%3Dteam1-score%5D').textContent%3Bteam_one_name %3D teams%5B0%5D.reduce(function(prev%2C curr)%7Breturn prev %2B ' ' %2B curr%7D%2C'Team%3A ')%3Bteam_two_name %3D teams%5B1%5D.reduce(function(prev%2C curr)%7Breturn prev %2B ' ' %2B curr%7D%2C'Team%3A ')%3Bteam_two_score %3D document.querySelector('%5Bdata-hook%3Dteam2-score%5D').textContent%3Bif (team_one_score > team_two_score)%7Bgame%5B'winner'%5D %3D team_one_name%3B%7D%3Bif (team_one_score < team_two_score) %7Bgame%5B'winner'%5D %3D team_two_name%3B%7D%3Bif (team_one_score %3D%3D team_two_score) %7Bgame%5B'winner'%5D %3D team_one_name %2B " - TIE - " %2B team_two_score%3B%7D%3B%7D%3BgameHash %3D JSON.stringify(game)%3Bif(gameHashesRecorded.indexOf(gameHash) %3D%3D -1 %26%26 game.scores.length > 1 %26%26 has_nonzero_score) %7Bconsole.log("Pushing new game to our array.")%3BgameHashesRecorded.push(gameHash)%3BgameStats.push(game)%3B%7D%7D%3Bfunction compile_game_stats() %7Bgamestr %3D format_games_string(gameStats)%3Bwinners %3D calculate_winners(gameStats)%3Bslackstr %3D format_slack_string(gameStats.length%2C winners%2C gamestr)%3Bsend_slack_message(slackstr)%3Breturn "Check slack if your games have saved! If not run 'compile_game_stats()' in your console."%3B%7D%3Bfunction format_games_string(stats) %7B%2F* assume no score%2Fkills%2Fdeaths > 9999 *%2Fgamestr %3D ""%3Bmargin %3D 2%3Blongest_name_length %3D stats.flatMap((game) %3D> game.scores.map((score) %3D> score.name)).reduce((acc%2C b) %3D> Math.max(acc%2C b.length%2C 0)%2C 0)%3Bstats.forEach(function(game) %7Bgamestr %2B%3D game.level_name %2B " - " %2B game.game_type %2B "%5Cn"%3Bgamestr %2B%3D "Name" %2B spaces(longest_name_length - 4 %2B margin) %2B "score  kills  deaths%5Cn"%3Bgame.scores.forEach(function(score) %7Bgamestr %2B%3D score.name%2B spaces(longest_name_length - score.name.length %2B margin)%2B right_align("score"%2C score.score)%2B spaces(margin)%2B right_align("kills"%2C score.kills)%2B spaces(margin)%2B right_align("deaths"%2C score.deaths)%2B "%5Cn"%3B%7D)%3Bgamestr %2B%3D "%5Cn"%3B%7D)%3Breturn gamestr%3B%7D%3Bfunction spaces(number) %7Bif (number < -1) %7Bnumber %3D -1%3B%7Dreturn new Array(number %2B 1).join(" ")%3B%7D%3Bfunction right_align(header_name%2C data) %7Breturn spaces(header_name.length - data.length) %2B data%3B%7D%3Bfunction calculate_winners(stats) %7Bwinners %3D %7B%7D%3Bstats.forEach(function(game) %7Bif(game.winner in winners)%7Bwinners%5Bgame.winner%5D%2B%2B%3B%7Delse%7Bwinners%5Bgame.winner%5D %3D 1%3B%7D%7D)%3Breturn winners%3B%7D%3Bfunction format_slack_string(num_games%2C winners%2C gamestr) %7Bslackstr %3D "%60%60%60%5Cn"%3Bslackstr %2B%3D "Total games%3A " %2B num_games %2B "%5CnWinners%3A%5Cn"%3Bfor (player_name in winners) %7Bslackstr %2B%3D "%5Ct" %2B player_name %2B "%5Ct" %2B winners%5Bplayer_name%5D %2B "%5Cn"%3B%7D%3Bslackstr %2B%3D "%5Cn" %2B gamestr %2B "%5Cn%60%60%60"%3Breturn slackstr%3B%7D%3B%2F** Change the channel%2C username and target URLs in the following block* to match your desired slack channel%2Fuser%2Fetc*%2Ffunction send_slack_message(message) %7Bpayload %3D %7Bchannel%3A "example_channel"%2Cusername%3A "example_user"%2Ctext%3A message%2Cicon_emoji%3A "%3Afeelsgood%3A"%7D%3Bfetch(%2F* TARGET URL GOES HERE FORMATTED AS STRING"https%3A%2F%2Fexample.foo%2Fbar" *%2F%7Bmethod%3A "POST"%2Cbody%3A JSON.stringify(payload)%7D)%3B%7D%3BtestGameStats %3D %5B%7B"game_type"%3A "Deathmatch"%2C"level_name"%3A "Random Dirt"%2C"scores"%3A %5B%7B"name"%3A "%5BFeDonkey%5DMorgoth"%2C"score"%3A "7"%2C"kills"%3A "7"%2C"deaths"%3A "6"%7D%2C%7B"name"%3A "%5BFeDonkey%5D deadbeef"%2C"score"%3A "3"%2C"kills"%3A "6"%2C"deaths"%3A "10"%7D%2C%5D%2C"winner"%3A "%5BFeDonkey%5DMorgoth"%7D%5D%3B%2F* console.log(format_games_string(testGameStats))%3B *%2Ffunction createButton(label%2C handler) %7Bvar button %3D document.createElement("button")%3Bbutton.innerHTML %3D label%3Bbutton.onclick %3D handler%3Bbutton.style %3D "display%3A inline-block%3B font-size%3A 24px%3B padding%3A 20px%3B background-color%3A yellow%3B"%3Breturn button%3B%7D%3Bfunction createButtonArray(buttons) %7Bdiv %3D document.createElement("div")%3Bdiv.style %3D "position%3A fixed%3B bottom%3A 0%3B right%3A 0%3B z-index%3A 999%3B"%3Bfor (var label in buttons) %7Bdiv.appendChild(createButton(label%2C buttons%5Blabel%5D))%7D%3Breturn div%3B%7D%3BbuttonDiv %3D createButtonArray(%7Bdebug%3A function() %7Bconsole.log("gameStats"%2C gameStats)%3Bconsole.log("gameHashesRecorded"%2C gameHashesRecorded)%3Bgamestr %3D format_games_string(gameStats)%3Bwinners %3D calculate_winners(gameStats)%3Bslackstr %3D format_slack_string(gameStats.length%2C winners%2C gamestr)%3Bconsole.log("gamestr"%2C gamestr)%3Bconsole.log("winners"%2C winners)%3Bconsole.log("slackstr"%2C slackstr)%3B%7D%2C"send it"%3A compile_game_stats%7D)%3Bdocument.body.appendChild(buttonDiv)%3Bwindow.onbeforeunload %3D compile_game_stats%3BsetInterval(parse_game_stats%2C 5000)%7D)(jQuery.noConflict(true))%7Dvar s%3Ddocument.createElement("script")%3Bs.src%3D"https%3A%2F%2Fajax.googleapis.com%2Fajax%2Flibs%2Fjquery%2F1.11.1%2Fjquery.min.js"%3Bif(s.addEventListener)%7Bs.addEventListener("load"%2Ccallback%2Cfalse)%7Delse if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)()